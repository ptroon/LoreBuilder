{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block head %}
    {{ super() }}
{% endblock %}
{% block content %}

<h5 class="card-header text-white bg-secondary">Dashboard</h5>

<div class="container-fluid mt-3">

{% if is_admin() %}
<div class="p-2 m-3 bg-light text-black font-weight-bold">Booking Administration</div>
<table class="table table-striped" id="t_admin">
  <thead class="thead-light">
    <tr>
      <th scope="col" class="w-25">Title</th>
      <th scope="col">Start</th>
      <th scope="col">End</th>
      <th scope="col">Project</th>
      <th scope="col">Cluster</th>
      <th scope="col">Approved</th>
      <th scope="col">Approved By</th>
      <th scope="col">Logged</th>
    </tr>
  </thead>
  <tbody>
    {%- for rec in data1 -%}
    <tr>
      <td class="w-25">{{ rec[0] }}</td>
      <td>{{ rec[1] }}</td>
      <td>{{ rec[2] }}</td>
      <td>{{ rec[3] }}</td>
      <td>{{ rec[4] }}</td>
      <td>{{ rec[5] }}</td>
      <td>{{ rec[6] }}</td>
      <td>{{ rec[7] }}</td>
    </tr>
    {%- endfor -%}
  </tbody>
</table>

{%- else -%}

<div class="p-2 m-3 bg-light text-black font-weight-bold">My Bookings</div>
<table class="table table-striped" id="t_bookings">
  <thead class="thead-light">
    <tr>
      <th scope="col" class="w-25">Title</th>
      <th scope="col">Start</th>
      <th scope="col">End</th>
      <th scope="col">Project</th>
      <th scope="col">Cluster</th>
      <th scope="col">Approved</th>
      <th scope="col">Approved By</th>
      <th scope="col">Logged</th>
    </tr>
  </thead>
  <tbody>
    {%- for rec in data2 -%}
    <tr>
      <td class="w-25">{{ rec[0] }}</td>
      <td>{{ rec[1] }}</td>
      <td>{{ rec[2] }}</td>
      <td>{{ rec[3] }}</td>
      <td>{{ rec[4] }}</td>
      <td>{{ rec[5] }}</td>
      <td>{{ rec[6] }}</td>
      <td>{{ rec[7] }}</td>
    </tr>
    {%- endfor -%}
  </tbody>
</table>

{% endif %}

</div>

<script>
$(document).ready( function () {
    $('#t_admin').DataTable();
} );

$(document).ready( function () {
    $('#t_bookings').DataTable();
} );
</script>

{% endblock %}
